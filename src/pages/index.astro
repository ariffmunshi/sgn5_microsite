---
import { Image } from "astro:assets";

import BaseLayout from "../layouts/BaseLayout.astro";
import BrandIntroClouds from "../components/brand-intro/BrandIntroClouds.astro";
import BrandIntro1 from "../components/brand-intro/BrandIntro1.astro";
import BrandIntro2 from "../components/brand-intro/BrandIntro2.astro";
import Community from "../components/Community.astro";
import MakanParty from "../components/MakanParty.astro";
import IceCreamQuiz from "../components/IceCreamQuiz.astro";
import Competition from "../components/Competition.astro";
import WellWishes from "../components/WellWishes.astro";
import Gallery from "../components/Gallery.astro";

import textureOverlay from "../images/texture-overlay.png";
---

<BaseLayout title="Year In Review">
  <!-- <Image id="texture-overlay" src={textureOverlay} alt="texture overlay" /> -->
  <BrandIntroClouds />
  <BrandIntro1 />
  <BrandIntro2 />
  <Community />
  <MakanParty />
  <IceCreamQuiz />
  <Competition />
  <WellWishes />
  <Gallery />
  <svg id="speaker-icon" width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle opacity="0.5" cx="28.5" cy="28.5" r="28.5" fill="black"/>
    <g clip-path="url(#clip0_1538_7)">
      <path d="M29.0932 40.7765C29.0932 42.5803 27.1399 43.6311 25.7395 42.5835L18.7518 37.359H15.1207C13.9494 37.359 13 36.3652 13 35.1391V23.8622C13 22.6361 13.9494 21.6423 15.1207 21.6423H18.7508L25.7385 16.4157C27.1409 15.367 29.0921 16.4199 29.0921 18.2227V40.7765H29.0932Z" fill="white"/>
      <g id="sound-waves">
        <path class="sound-wave" d="M36.5359 32.8827C36.5359 34.1088 35.5865 35.1026 34.4152 35.1026C33.2438 35.1026 32.2944 34.1088 32.2944 32.8827V26.1163C32.2944 24.8902 33.2438 23.8964 34.4152 23.8964C35.5865 23.8964 36.5359 24.8902 36.5359 26.1163V32.8827Z" fill="white"/>
        <path class="sound-wave" d="M43 36.2664C43 37.4925 42.0506 38.4863 40.8793 38.4863C39.7079 38.4863 38.7585 37.4925 38.7585 36.2664V22.7336C38.7585 21.5075 39.7079 20.5137 40.8793 20.5137C42.0506 20.5137 43 21.5075 43 22.7336V36.2664Z" fill="white"/>
      </g>
    </g>
    <defs>
    <clipPath id="clip0_1538_7">
      <rect width="30" height="27" fill="white" transform="translate(13 16)"/>
    </clipPath>
    </defs>
  </svg>    
</BaseLayout>

<style>
  #texture-overlay {
    position: fixed;
    top: 0;
    left: 0;
    object-fit: cover;
    z-index: 100;
    mix-blend-mode: multiply;
    pointer-events: none;
  }

  #speaker-icon {
    position: fixed;
    right: 2rem;
    bottom: 2rem;
    height: 3rem;
    width: 3rem;
    z-index: 6;
    cursor: pointer;
  }
</style>

<script>
  const speakerIcon = document.querySelector("#speaker-icon")!;
  const soundWaves = document.querySelector("#sound-waves")!;
  const audioElements = document.querySelectorAll("audio")!;

  audioElements.forEach(ele => {
    ele.muted = false
  })

  speakerIcon.addEventListener("click", () => {
    audioElements.forEach(ele => {
      ele.muted = !ele.muted
    })

    soundWaves.style.display = audioElements[0].muted ? "none" : "block"
  })
</script>